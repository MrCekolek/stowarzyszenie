<div class="tab-content">
    <div class="container-fluid">
        <div class="mb-3 card">
            <div class="card-header justify-content-between">
                <div class="card-title">
                    <i class="fas fa-user-tag"></i> {{ 'STOWARZYSZENIE.MODULES.ROLES.LIST_TITLE' | translate }}
                </div>
                <button class="btn btn-secondary btn-sm" (click)="openNewRoleModal()">
                    <i class="fas fa-plus mr-2"></i>
                    {{ 'STOWARZYSZENIE.MODALS.NEW_ROLE.TRIGGER_BUTTON' | translate }}
                </button>
            </div>
            <div class="card-body example-container">
                <div class="d-flex mt-1 mb-5">
                    <div>
                        {{ 'STOWARZYSZENIE.MODULES.ROLES.CHOOSE_ROLE' | translate }}
                    </div>

                    <!-- roles select -->
                    <select class="custom-select" #roleSelect (change)="selectRole(roleSelect.value)">
                        <option value="0" selected>
                            {{ 'STOWARZYSZENIE.MODULES.ROLES.SELECT_DESC' | translate }}
                        </option>

                        <option value="spinner" *ngIf="rolesAreLoading">
                            <div class="d-flex justify-content-center">
                                <div class="spinner-border" role="status">
                                    <span class="sr-only">Loading...</span>
                                </div>
                            </div>
                        </option>

                        <option *ngFor="let role of this.rolesNames" [value]="role.id">
                            {{ role.name }}
                        </option>
                    </select>
                </div>

                <div class="d-flex mb-3" *ngIf="this.selectedRole.permissions">
                    {{ 'STOWARZYSZENIE.MODULES.ROLES.ARE_EDITING' | translate }}
                    <span>
                        {{ this.selectedRole.name }}
                    </span>
                    <button class="btn btn-link" (click)="openEditRoleModal(this.selectedRole.name)">
                        {{ 'STOWARZYSZENIE.MODULES.ROLES.EDIT_NAME' | translate }}
                    </button>
                </div>

                <div class="permissions" *ngIf="this.selectedRole.permissions">
                    <div class="select-all mb-3">
                        <button class="btn btn-sm btn-info" (click)="selectUnselectAll(roles)">
                            <span *ngIf="roles.isAllSelected; else noneSelected">
                                {{ 'STOWARZYSZENIE.MODULES.ROLES.UNSELECT_ALL' | translate }}
                            </span>
                            <ng-template #noneSelected>
                                {{ 'STOWARZYSZENIE.MODULES.ROLES.SELECT_ALL' | translate }}
                            </ng-template>
                        </button>

                        <button class="btn btn-sm btn-info ml-3" (click)="expandCollapseAll(roles)">
                            <span *ngIf="roles.isAllCollapsed; else isCollapsed">
                                {{ 'STOWARZYSZENIE.MODULES.ROLES.EXPAND_ALL' | translate }}
                                <i class="fas fa-angle-double-down ml-2"></i>
                            </span>
                            <ng-template #isCollapsed>
                                {{ 'STOWARZYSZENIE.MODULES.ROLES.COLLAPSE_ALL' | translate }}
                                <i class="fas fa-angle-double-up ml-2"></i>
                            </ng-template>
                        </button>
                    </div>

                    <app-permission-group *ngFor="let group of this.roles.parentChildChecklist" [permissionGroupObj]="group">
                    </app-permission-group>
                </div>

                <div class="action">
                    <button class="btn btn-success" (click)="saveRole(roleSelect.value)">
                        {{ 'STOWARZYSZENIE.CRUD_BUTTONS.SAVE' | translate }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>